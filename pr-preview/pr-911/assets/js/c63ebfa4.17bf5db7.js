"use strict";(globalThis.webpackChunkunderthesea_docs=globalThis.webpackChunkunderthesea_docs||[]).push([[975],{8453(e,n,t){t.d(n,{R:()=>d,x:()=>l});var i=t(6540);const r={},s=i.createContext(r);function d(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(s.Provider,{value:n},e.children)}},9830(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"api/ner","title":"ner","description":"Identify and classify named entities in text.","source":"@site/docs/api/ner.md","sourceDirName":"api","slug":"/api/ner","permalink":"/docs/api/ner","draft":false,"unlisted":false,"editUrl":"https://github.com/undertheseanlp/underthesea/tree/main/docusaurus/docs/api/ner.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"dependency_parse","permalink":"/docs/api/dependency-parse"},"next":{"title":"classify","permalink":"/docs/api/classify"}}');var r=t(4848),s=t(8453);const d={},l="ner",c={},a=[{value:"Usage",id:"usage",level:2},{value:"Function Signature",id:"function-signature",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Returns",id:"returns",level:2},{value:"CRF Model (default)",id:"crf-model-default",level:3},{value:"Deep Learning Model (<code>deep=True</code>)",id:"deep-learning-model-deeptrue",level:3},{value:"Entity Types",id:"entity-types",level:2},{value:"Examples",id:"examples",level:2},{value:"Basic Usage (CRF Model)",id:"basic-usage-crf-model",level:3},{value:"Deep Learning Model",id:"deep-learning-model",level:3},{value:"Extracting Entities by Type",id:"extracting-entities-by-type",level:3},{value:"Combining Multi-word Entities",id:"combining-multi-word-entities",level:3},{value:"Notes",id:"notes",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ner",children:"ner"})}),"\n",(0,r.jsx)(n.p,{children:"Identify and classify named entities in text."}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from underthesea import ner\n\ntext = \"Ch\u01b0a ti\u1ebft l\u1ed9 l\u1ecbch tr\xecnh t\u1edbi Vi\u1ec7t Nam c\u1ee7a T\u1ed5ng th\u1ed1ng M\u1ef9 Donald Trump\"\nentities = ner(text)\nprint(entities)\n# [('Ch\u01b0a', 'R', 'O', 'O'),\n#  ('ti\u1ebft l\u1ed9', 'V', 'B-VP', 'O'),\n#  ('l\u1ecbch tr\xecnh', 'V', 'B-VP', 'O'),\n#  ('t\u1edbi', 'E', 'B-PP', 'O'),\n#  ('Vi\u1ec7t Nam', 'Np', 'B-NP', 'B-LOC'),\n#  ('c\u1ee7a', 'E', 'B-PP', 'O'),\n#  ('T\u1ed5ng th\u1ed1ng', 'N', 'B-NP', 'O'),\n#  ('M\u1ef9', 'Np', 'B-NP', 'B-LOC'),\n#  ('Donald', 'Np', 'B-NP', 'B-PER'),\n#  ('Trump', 'Np', 'B-NP', 'I-PER')]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"function-signature",children:"Function Signature"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"def ner(\n    sentence: str,\n    format: str = None,\n    deep: bool = False\n) -> list[tuple] | list[dict]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sentence"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"str"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:"The input text"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"format"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"str"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"None"})}),(0,r.jsx)(n.td,{children:"Output format"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"deep"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"bool"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"False"})}),(0,r.jsxs)(n.td,{children:["Use deep learning model (requires ",(0,r.jsx)(n.code,{children:"[deep]"})," install)"]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"returns",children:"Returns"}),"\n",(0,r.jsx)(n.h3,{id:"crf-model-default",children:"CRF Model (default)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"list[tuple[str, str, str, str]]"})}),(0,r.jsx)(n.td,{children:"List of (word, POS, chunk, entity) tuples"})]})})]}),"\n",(0,r.jsxs)(n.h3,{id:"deep-learning-model-deeptrue",children:["Deep Learning Model (",(0,r.jsx)(n.code,{children:"deep=True"}),")"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"list[dict]"})}),(0,r.jsxs)(n.td,{children:["List of dictionaries with ",(0,r.jsx)(n.code,{children:"entity"})," and ",(0,r.jsx)(n.code,{children:"word"})," keys"]})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"entity-types",children:"Entity Types"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Tag"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PER"})}),(0,r.jsx)(n.td,{children:"Person"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"LOC"})}),(0,r.jsx)(n.td,{children:"Location"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ORG"})}),(0,r.jsx)(n.td,{children:"Organization"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"O"})}),(0,r.jsx)(n.td,{children:"Not an entity"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Tags use BIO format:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"B-XXX"}),": Beginning of entity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"I-XXX"}),": Inside entity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"O"}),": Outside (not an entity)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"basic-usage-crf-model",children:"Basic Usage (CRF Model)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from underthesea import ner\n\ntext = "Ch\u01b0a ti\u1ebft l\u1ed9 l\u1ecbch tr\xecnh t\u1edbi Vi\u1ec7t Nam c\u1ee7a T\u1ed5ng th\u1ed1ng M\u1ef9 Donald Trump"\nentities = ner(text)\n\n# Extract only named entities\nfor word, pos, chunk, entity in entities:\n    if entity != \'O\':\n        print(f"{word}: {entity}")\n# Vi\u1ec7t Nam: B-LOC\n# M\u1ef9: B-LOC\n# Donald: B-PER\n# Trump: I-PER\n'})}),"\n",(0,r.jsx)(n.h3,{id:"deep-learning-model",children:"Deep Learning Model"}),"\n",(0,r.jsx)(n.p,{children:'!!! note "Requires Installation"'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'pip install "underthesea[deep]"\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from underthesea import ner\n\ntext = \"B\u1ed9 C\xf4ng Th\u01b0\u01a1ng x\xf3a m\u1ed9t t\u1ed5ng c\u1ee5c, gi\u1ea3m nhi\u1ec1u \u0111\u1ea7u m\u1ed1i\"\nentities = ner(text, deep=True)\nprint(entities)\n# [\n#   {'entity': 'B-ORG', 'word': 'B\u1ed9'},\n#   {'entity': 'I-ORG', 'word': 'C\xf4ng'},\n#   {'entity': 'I-ORG', 'word': 'Th\u01b0\u01a1ng'}\n# ]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"extracting-entities-by-type",children:"Extracting Entities by Type"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'text = "\xd4ng Nguy\u1ec5n V\u0103n A t\u1eeb H\xe0 N\u1ed9i \u0111\u1ebfn c\xf4ng ty ABC"\nentities = ner(text)\n\npersons = []\nlocations = []\norgs = []\n\nfor word, pos, chunk, entity in entities:\n    if entity.endswith(\'PER\'):\n        persons.append(word)\n    elif entity.endswith(\'LOC\'):\n        locations.append(word)\n    elif entity.endswith(\'ORG\'):\n        orgs.append(word)\n\nprint(f"Persons: {persons}")\nprint(f"Locations: {locations}")\nprint(f"Organizations: {orgs}")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"combining-multi-word-entities",children:"Combining Multi-word Entities"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"text = \"T\u1ed5ng th\u1ed1ng M\u1ef9 Donald Trump th\u0103m Vi\u1ec7t Nam\"\nentities = ner(text)\n\n# Combine B-/I- tags into full entities\ncurrent_entity = []\ncurrent_type = None\nfull_entities = []\n\nfor word, pos, chunk, entity in entities:\n    if entity.startswith('B-'):\n        if current_entity:\n            full_entities.append((' '.join(current_entity), current_type))\n        current_entity = [word]\n        current_type = entity[2:]\n    elif entity.startswith('I-'):\n        current_entity.append(word)\n    else:\n        if current_entity:\n            full_entities.append((' '.join(current_entity), current_type))\n            current_entity = []\n            current_type = None\n\nif current_entity:\n    full_entities.append((' '.join(current_entity), current_type))\n\nprint(full_entities)\n# [('Donald Trump', 'PER'), ('Vi\u1ec7t Nam', 'LOC')]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The CRF model is fast and lightweight"}),"\n",(0,r.jsx)(n.li,{children:"The deep learning model provides better accuracy but requires more resources"}),"\n",(0,r.jsxs)(n.li,{children:["First call with ",(0,r.jsx)(n.code,{children:"deep=True"})," may take longer due to model loading"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);