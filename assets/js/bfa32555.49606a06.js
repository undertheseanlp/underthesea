"use strict";(globalThis.webpackChunkunderthesea_docs=globalThis.webpackChunkunderthesea_docs||[]).push([[918],{7178(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>x,frontMatter:()=>i,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"api/core/text-preprocessor","title":"TextPreprocessor","description":"Configurable Vietnamese text preprocessing pipeline. Serializable with the TextClassifier model so preprocessing config always travels with the model.","source":"@site/versioned_docs/version-9.2.11/api/core/text-preprocessor.md","sourceDirName":"api/core","slug":"/api/core/text-preprocessor","permalink":"/underthesea/docs/api/core/text-preprocessor","draft":false,"unlisted":false,"editUrl":"https://github.com/undertheseanlp/underthesea/tree/main/docusaurus/versioned_docs/version-9.2.11/api/core/text-preprocessor.md","tags":[],"version":"9.2.11","frontMatter":{},"sidebar":"apiReferenceSidebar","previous":{"title":"TfIdfVectorizer","permalink":"/underthesea/docs/api/core/tfidf"}}');var s=r(4848),c=r(8453);const i={},t="TextPreprocessor",l={},o=[{value:"Pipeline Steps",id:"pipeline-steps",level:2},{value:"Usage",id:"usage",level:2},{value:"Constructor",id:"constructor",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Properties",id:"properties",level:2},{value:"Methods",id:"methods",level:2},{value:"Default Teencode Dictionary",id:"default-teencode-dictionary",level:2},{value:"Default Negation Words",id:"default-negation-words",level:2},{value:"With TextClassifier",id:"with-textclassifier",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"textpreprocessor",children:"TextPreprocessor"})}),"\n",(0,s.jsxs)(n.p,{children:["Configurable Vietnamese text preprocessing pipeline. Serializable with the ",(0,s.jsx)(n.code,{children:"TextClassifier"})," model so preprocessing config always travels with the model."]}),"\n",(0,s.jsx)(n.h2,{id:"pipeline-steps",children:"Pipeline Steps"}),"\n",(0,s.jsx)(n.p,{children:"Applied in order:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Unicode NFC normalization"}),"\n",(0,s.jsx)(n.li,{children:"Lowercase"}),"\n",(0,s.jsx)(n.li,{children:"URL removal"}),"\n",(0,s.jsxs)(n.li,{children:["Repeated character normalization (",(0,s.jsx)(n.code,{children:'"\u0111\u1eb9ppp"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"\u0111\u1eb9pp"'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Punctuation normalization (",(0,s.jsx)(n.code,{children:'"!!!"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"!"'}),", ",(0,s.jsx)(n.code,{children:'"????"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"?"'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Teencode expansion (",(0,s.jsx)(n.code,{children:'"ko"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"kh\xf4ng"'}),", ",(0,s.jsx)(n.code,{children:'"dc"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"\u0111\u01b0\u1ee3c"'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Negation marking (",(0,s.jsx)(n.code,{children:'"kh\xf4ng t\u1ed1t"'})," \u2192 ",(0,s.jsx)(n.code,{children:'"kh\xf4ng NEG_t\u1ed1t"'}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from underthesea_core import TextPreprocessor\n\n# Default Vietnamese preprocessing\npp = TextPreprocessor()\npp.transform("S\u1ea3n ph\u1ea9m ko \u0111\u1eb9p l\u1eafm!!!")\n# "s\u1ea3n ph\u1ea9m kh\xf4ng NEG_\u0111\u1eb9p NEG_l\u1eafm!"\n\n# Batch processing\nresults = pp.transform_batch(["Ko \u0111\u1eb9p", "SP t\u1ed1t l\u1eafm!!!"])\n# ["kh\xf4ng NEG_\u0111\u1eb9p", "s\u1ea3n ph\u1ea9m t\u1ed1t l\u1eafm!"]\n\n# Custom teencode dictionary\npp = TextPreprocessor(teencode={"ko": "kh\xf4ng", "dc": "\u0111\u01b0\u1ee3c"})\n\n# Custom negation words and window\npp = TextPreprocessor(\n    negation_words=["kh\xf4ng", "ch\u01b0a", "ch\u1eb3ng"],\n    negation_window=3,\n)\n\n# Disable specific steps\npp = TextPreprocessor(lowercase=False, remove_urls=False)\n\n# Disable teencode and negation entirely\npp = TextPreprocessor(teencode=None, negation_words=None, use_defaults=False)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"TextPreprocessor(\n    lowercase=True,\n    unicode_normalize=True,\n    remove_urls=True,\n    normalize_repeated_chars=True,\n    normalize_punctuation=True,\n    teencode=None,\n    negation_words=None,\n    negation_window=2,\n    use_defaults=True,\n)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"lowercase"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Convert text to lowercase"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"unicode_normalize"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Apply Unicode NFC normalization"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"remove_urls"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Remove URLs (http/https/www)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"normalize_repeated_chars"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Reduce 3+ repeated chars to 2"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"normalize_punctuation"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsx)(n.td,{children:"Reduce repeated punctuation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"teencode"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dict | None"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsxs)(n.td,{children:["Custom teencode dictionary. With ",(0,s.jsx)(n.code,{children:"use_defaults=True"}),", defaults to built-in Vietnamese teencode"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"negation_words"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"list[str] | None"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"None"})}),(0,s.jsxs)(n.td,{children:["Custom negation words. With ",(0,s.jsx)(n.code,{children:"use_defaults=True"}),", defaults to built-in Vietnamese negation words"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"negation_window"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"2"})}),(0,s.jsxs)(n.td,{children:["Number of words after negation word to mark with ",(0,s.jsx)(n.code,{children:"NEG_"})," prefix"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"use_defaults"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"bool"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"True"})}),(0,s.jsxs)(n.td,{children:["When ",(0,s.jsx)(n.code,{children:"True"}),", use Vietnamese defaults for teencode/negation if not provided. When ",(0,s.jsx)(n.code,{children:"False"}),", ",(0,s.jsx)(n.code,{children:"None"})," means disabled"]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Property"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"teencode"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dict | None"})}),(0,s.jsx)(n.td,{children:"Current teencode dictionary"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"negation_words"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"list[str] | None"})}),(0,s.jsx)(n.td,{children:"Current negation words"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"negation_window"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"int"})}),(0,s.jsx)(n.td,{children:"Current negation window size"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Returns"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"transform(text)"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"str"})}),(0,s.jsx)(n.td,{children:"Preprocess a single text string"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"transform_batch(texts)"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"list[str]"})}),(0,s.jsx)(n.td,{children:"Preprocess a list of texts"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"default-teencode-dictionary",children:"Default Teencode Dictionary"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Teencode"}),(0,s.jsx)(n.th,{children:"Expansion"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"ko"}),", ",(0,s.jsx)(n.code,{children:"k"}),", ",(0,s.jsx)(n.code,{children:"hok"}),", ",(0,s.jsx)(n.code,{children:"hem"})]}),(0,s.jsx)(n.td,{children:"kh\xf4ng"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"dc"}),", ",(0,s.jsx)(n.code,{children:"\u0111c"}),", ",(0,s.jsx)(n.code,{children:"dk"})]}),(0,s.jsx)(n.td,{children:"\u0111\u01b0\u1ee3c"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"sp"})}),(0,s.jsx)(n.td,{children:"s\u1ea3n ph\u1ea9m"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"bt"}),", ",(0,s.jsx)(n.code,{children:"bth"})]}),(0,s.jsx)(n.td,{children:"b\xecnh th\u01b0\u1eddng"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"ok"}),", ",(0,s.jsx)(n.code,{children:"oke"})]}),(0,s.jsx)(n.td,{children:"t\u1ed1t"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"tks"}),", ",(0,s.jsx)(n.code,{children:"thanks"}),", ",(0,s.jsx)(n.code,{children:"thank"})]}),(0,s.jsx)(n.td,{children:"c\u1ea3m \u01a1n"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ntn"})}),(0,s.jsx)(n.td,{children:"nh\u01b0 th\u1ebf n\xe0o"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"mn"})}),(0,s.jsx)(n.td,{children:"m\u1ecdi ng\u01b0\u1eddi"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"cx"}),", ",(0,s.jsx)(n.code,{children:"cg"})]}),(0,s.jsx)(n.td,{children:"c\u0169ng"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vs"})}),(0,s.jsx)(n.td,{children:"v\u1edbi"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"..."}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.em,{children:"(30+ rules total)"})})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"default-negation-words",children:"Default Negation Words"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"kh\xf4ng"}),", ",(0,s.jsx)(n.code,{children:"ch\u1eb3ng"}),", ",(0,s.jsx)(n.code,{children:"ch\u1ea3"}),", ",(0,s.jsx)(n.code,{children:"ch\u01b0a"}),", ",(0,s.jsx)(n.code,{children:"\u0111\u1eebng"}),", ",(0,s.jsx)(n.code,{children:"ko"}),", ",(0,s.jsx)(n.code,{children:"hok"}),", ",(0,s.jsx)(n.code,{children:"hem"}),", ",(0,s.jsx)(n.code,{children:"ch\u0103ng"})]}),"\n",(0,s.jsx)(n.h2,{id:"with-textclassifier",children:"With TextClassifier"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from underthesea_core import TextClassifier, TextPreprocessor\n\npp = TextPreprocessor()\nclf = TextClassifier(preprocessor=pp)\nclf.fit(texts, labels)\n\n# Preprocessor is saved together with the model\nclf.save("model.bin")\nclf = TextClassifier.load("model.bin")  # preprocessor is restored\n'})})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>t});var d=r(6540);const s={},c=d.createContext(s);function i(e){const n=d.useContext(c);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),d.createElement(c.Provider,{value:n},e.children)}}}]);